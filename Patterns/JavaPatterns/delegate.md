https://june0122.github.io/2021/08/21/design-pattern-delegate/

위임 패턴이란? 객체합성이 상속과 동일하게 코드 재사용을 할 수 있도록 하는 객체지향 디자인 패턴

상속과합성의차이 inheritance와 composition


객체지향 시스템에서. 기능의 재사용을위해 클래스상속 또는 객체합성

클래스 상속
1.서브클래싱. 즉 다른 부모의 클래스에서 상속받아 한클래스의 구현 정의

2. 서브클래싱에 의한 재사용을 화이트박스 재사용이라고한다.

**클래스 상속보다는 객체 합성을 선호하라(Favor object composition over class inheritance.).**

재사용을 위해서 새로운 구성요소 생성할 필요 없이. 필요한 기존의 구성요소를 조립해 모든 새로운 기능을 얻어온다.

그러나 가능한 구성요소의 집합이 실제로 사용할수 있을마큼 충분하지 않기에. 기존 구성요소의 조합을 통한 재사용만으로 목적을 달성하는 경우는 드물다

상속에 의한 재사용은 기존 클래스들을 조합해서 새로운 구성요소를 쉽게 만들 수 있도록 해줌. 상속과 객체합성은 적절히조합해야함



**위임(delegateion)**

은 합성을 상속만큼 강력하게 만들어준다.

위임은 두객체가 하나의 요청을 처리한다. 수신 객체가 연산의 처리를 위임자(delegate)에게 보낸다.

이는 서브클래스가 부모클래스에게 요청을 전달하는 것과 유사한 방식

위임과 동일한 효과 얻으려면. 수신객체는 대리자에게 자신을 매개변수로 전달해서 위임된 연산이 수신자를 참조하게

![130242401-6f1987cc-4d37-453d-8601-a9ffd5ff269d](https://user-images.githubusercontent.com/75001605/166560300-42c147c4-8272-42ff-a444-220cc1ce70ad.png)

window 클래스를 rectangle의 서브클래스로 만드는것보다. window 클래스는 rectangle 클래스를 자신의 인스턴스 변수로 만들고.

rectangle 클래스에 정의된 행동ㅇ이 필요할때는 rectangle 클래스에 위임함으로써, rectangle 행동을 재사용ㄱ가능.

상속에 의해 window 인스턴스를 rectangle인스턴스로 간주하는 방식이아니라 window가 렉탱글을 포함

윈도우는 자시니 받은 요청을 랙텡글 에 젇날


Window 클래스는 area() 연산을 Rectangle 인스턴스에 전달한다.

위임의 가장 중요한 장점은 런타임에 행동의 복합을 가능하게 하고, 복합하는 방식도 변경해준다는 것이다.

그 이유는 클래스에 상호작용이 다 정의되어 있는 것이 아니라 런타임 객체에 따라서 그 결과가 다르기 때문이다. 또한 런타임에 비효율적일 수 있다.
이런 위임이 만들어 내는 복잡함보다 단순화의 효과를 더 크게 할 수 있다면

위임을 부분적으로 사용하는패턴
상태, 전략, 방문자.

전적으로 의존
책임연쇄, 가교, 중재자

interface 부동산계약
{
fu 계약하기
}

부동산 계약을 진행하는 본인은 부동산 계약 인터페이스를 구현하여 게약이 가능

class 본인(): 부동산 계약 {

override fun 게약하기.

하지만 중개인은 본인에게 위임 받지 않는이상 부동산 계약이 불가능.

코틀린에서는 by keyword 사용

val me = 본인()
class 부동산 중개인() : 부동산계약 by me//나의 계약하기 fun이 부동산중개인에게 위임

fun main() {
 qn부동산 중개인().계약하기// 계약
}

여기서 보일러플레이트 코드: 무의미하게 반복되어 가독성을 떨어트리고 유지보수 어렵게하는코드



를 줄이려면

by 키워드? interface가 implement되거나 다른 클래스가 상속될 수 있다. 위임패턴은 인터페이스 구현부를 다른 클래스에 위임. 인터페이스 구현에만 사용



제한을가짐


변수와 메서드에 대한 위임만이 가능.

```
interface 부동산계약 {
  fun 계약하기 ()
  }
  
 class 본인() : 부동산 계약 {
   override fun 계약하기 () {
   println("집이 계약되었습니다")
   }
  }
  ```
  
 부동산계약 인터페이스 구현하는 본인클래스 준비.
 
 
 메서드 fun 위임.
 
 
```
val me = 본인()

class 부동산중개인() : 부동산계약 by me

```
부동산 중개인은 본인의 계약하기 fun을 위임받는다.

